# read_argv.bld - Read command line argument
#
# Reads argv[n] into rax
# Input: $argv_offset (8 = argv[0], 16 = argv[1], etc.)
# Output: x86 code that loads argv[n] into rax

structure ReadArgv

# mov rax, [rsp + offset]
# Uses MovRM with rsp as source, rax as dest

D bytes: 1 [composed]

B instruction: mov_rm
  mov_rm -> set(dst_lo, 0), set(dst_ext, 0), set(src_lo, 4), set(src_ext, 0), uses=MovRM

returns: output
