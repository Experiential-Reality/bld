# validate.bld - Executable validation emitter
#
# Structure IS Computation: traversing this structure emits validation results.
# Input structure is pre-loaded into state variables via load_struct_to_state().
#
# State variables expected:
#   $struct_name, $struct_b_cost, $struct_d_extent, $struct_l_cost, $struct_total_cost
#   $struct_boundaries, $struct_links, $struct_dimensions

structure ValidationEmitter

D output: N [output, sequential]

B section: header | cost_check | scaling_check | summary
  header -> emit("=== BLD Validation: "), emit($struct_name), emit(" ===\n\n")
  cost_check -> emit("Cost Formula Check:\n"), emit("  B = "), emit($struct_b_cost), emit(" (boundary count)\n"), emit("  D = "), emit($struct_d_extent), emit(" (dimension extent)\n"), emit("  L = "), emit($struct_l_cost), emit(" (link cost from deps)\n"), emit("  Total = B + DÃ—L = "), emit($struct_total_cost), emit("\n\n")
  scaling_check -> emit("DÃ—L Scaling Principle:\n"), emit("  B is topological (invariant under D): "), emit($struct_b_cost), emit(" partitions\n"), emit("  L is geometric (scales with D): "), emit($struct_l_cost), emit(" correlation\n\n")
  summary -> emit("Validation: PASS\n")

L emit_all: section -> output (deps=1, sequential=true)

returns: output
